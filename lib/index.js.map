{"version":3,"sources":["../src/index.js"],"names":["translationScope","isString","val","Object","prototype","toString","call","isFunction","isPlainObject","isSymbol","key","hasOwnProp","obj","hasOwnProperty","result","getEntry","translations","keys","reduce","Counterpart","getLocaleIntern","_registry","locale","setLocaleIntern","previous","value","emit","getFallbackLocale","fallbackLocales","setFallbackLocaleIntern","concat","getAvailableLocale","availableLocales","setAvailableLocales","getAvailableLocales","getSeparator","separator","setSeparatorIntern","setInterpolate","interpolate","getInterpolate","setKeyTransformerIntern","keyTransformer","getKeyTransformer","registerTranslationsIntern","data","registerInterpolationsIntern","interpolations","translateIntern","options","length","Error","substr","scope","fallbackLocale","_normalizeKeys","entry","fallback","_fallback","includes","ix","fallbackKeys","console","log","join","_pluralize","count","_interpolate","localizeIntern","object","type","format","pluralizeFunc","withLocaleIntern","callback","context","withScope","withSeparator","_normalizeKey","normalizedKeys","k","normalizedKeyArray","split","i","splice","keepTrailingDot","values","_resolve","subject","resolve","dateOrTime","test","ii","require","setMaxListeners","EventEmitter","instance","onLocaleChange","addLocaleChangeListener","addListener","offLocaleChange","removeLocaleChangeListener","removeListener","onTranslationNotFound","addTranslationNotFoundListener","offTranslationNotFound","removeTranslationNotFoundListener","registerTranslations","translate","setLocale","setFallbackLocale","setSeparator","getLocale","withLocale","registerInterpolations","setKeyTransformer","localize","Instance","Translator","counterpart"],"mappings":"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","file":"index.js","sourcesContent":["import extend from 'extend';\r\nimport {isArray} from 'util';\r\nimport {isDate} from 'util';\r\nimport {sprintf} from \"sprintf-js\";\r\nimport events from 'events';\r\nimport except from 'except';\r\nimport strftime from './strftime';\r\n\r\nconst translationScope = 'counterpart';\r\n\r\nconst isString = val => typeof val === 'string' || Object.prototype.toString.call(val) === '[object String]';\r\n\r\nconst isFunction = val => typeof val === 'function' || Object.prototype.toString.call(val) === '[object Function]';\r\n\r\n//Deal with older browsers (IE8) that don't return [object Null] in this case.\r\nconst isPlainObject = val => (val === null) ? false : Object.prototype.toString.call(val) === '[object Object]';\r\n\r\nconst isSymbol = key => isString(key) && key[0] === ':';\r\n\r\nconst hasOwnProp = (obj, key) => Object.prototype.hasOwnProperty.call(obj, key);\r\n\r\nconst getEntry = (translations, keys) => keys.reduce((result, key) => isPlainObject(result) && hasOwnProp(result, key) ? result[key] : null, translations);\r\n\r\nclass Counterpart extends events.EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this._registry = {\r\n      locale: 'en',\r\n      interpolate: true,\r\n      fallbackLocales: [],\r\n      scope: null,\r\n      translations: {},\r\n      interpolations: {},\r\n      normalizedKeys: {},\r\n      separator: '.',\r\n      keepTrailingDot: false,\r\n      keyTransformer(key) { return key; },\r\n    };\r\n\r\n    this.registerTranslationsIntern('en', require('../locales/en'));\r\n    this.setMaxListeners(0);\r\n  }\r\n\r\n  getLocaleIntern = () => this._registry.locale;\r\n\r\n  setLocaleIntern = value => {\r\n    const previous = this._registry.locale;\r\n\r\n    if (previous != value) {\r\n      this._registry.locale = value;\r\n      this.emit('localechange', value, previous);\r\n    }\r\n\r\n    return previous;\r\n  }\r\n\r\n  getFallbackLocale = () => {\r\n    return this._registry.fallbackLocales;\r\n  }\r\n\r\n  setFallbackLocaleIntern = value => {\r\n    const previous = this._registry.fallbackLocales;\r\n    this._registry.fallbackLocales = [].concat(value || []);\r\n    return previous;\r\n  }\r\n\r\n  getAvailableLocale = () => this._registry.availableLocales || Object.keys(this._registry.translations);\r\n\r\n  setAvailableLocales = value => {\r\n    const previous = this.getAvailableLocales();\r\n    this._registry.availableLocales = value;\r\n    return previous;\r\n  }\r\n\r\n  getSeparator = () => this._registry.separator;\r\n\r\n  setSeparatorIntern = value => {\r\n    const previous = this._registry.separator;\r\n    this._registry.separator = value;\r\n    return previous;\r\n  }\r\n\r\n  setInterpolate = value => {\r\n    const previous = this._registry.interpolate;\r\n    this._registry.interpolate = value;\r\n    return previous;\r\n  }\r\n\r\n  getInterpolate = () => this._registry.interpolate;\r\n\r\n  setKeyTransformerIntern = value => {\r\n    const previous = this._registry.keyTransformer;\r\n    this._registry.keyTransformer = value;\r\n    return previous;\r\n  }\r\n\r\n  getKeyTransformer = () => this._registry.keyTransformer;\r\n\r\n  registerTranslationsIntern = (locale, data) => {\r\n    const translations = {};\r\n    translations[locale] = data;\r\n    extend(true, this._registry.translations, translations);\r\n    return translations;\r\n  }\r\n\r\n  registerInterpolationsIntern = data => extend(true, this._registry.interpolations, data);\r\n\r\n  translateIntern = (key, options) => {\r\n    if (!isArray(key) && !isString(key) || !key.length) {\r\n      throw new Error('invalid argument: key');\r\n    }\r\n\r\n    if (isSymbol(key)) {\r\n      key = key.substr(1);\r\n    }\r\n\r\n    key = this._registry.keyTransformer(key, options);\r\n\r\n    options = extend(true, {}, options);\r\n\r\n    let locale = options.locale || this._registry.locale;\r\n    delete options.locale;\r\n\r\n    const scope = options.scope || this._registry.scope;\r\n    delete options.scope;\r\n\r\n    const separator = options.separator || this._registry.separator;\r\n    delete options.separator;\r\n\r\n    const fallbackLocales = [].concat(options.fallbackLocale || this._registry.fallbackLocales);\r\n    delete options.fallbackLocale;\r\n\r\n    const keys = this._normalizeKeys(locale, scope, key, separator);\r\n\r\n    let entry = getEntry(this._registry.translations, keys);\r\n\r\n    if (entry === null && options.fallback) {\r\n      this.emit('translationnotfound', locale, key, options.fallback, scope);\r\n      entry = this._fallback(locale, scope, key, options.fallback, options);\r\n    }\r\n\r\n    if (entry === null && fallbackLocales.length > 0 && !fallbackLocales.includes(locale)) {\r\n      for (const ix in fallbackLocales) {\r\n        const fallbackLocale = fallbackLocales[ix];\r\n        const fallbackKeys = this._normalizeKeys(fallbackLocale, scope, key, separator);\r\n        entry = getEntry(this._registry.translations, fallbackKeys);\r\n\r\n        if (entry) {\r\n          locale = fallbackLocale;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (entry === null) {\r\n      entry = keys[1];\r\n      console.log('counterpart missing translation: ' + keys.join(separator));\r\n    }\r\n\r\n    entry = this._pluralize(locale, entry, options.count);\r\n\r\n    if (this._registry.interpolate !== false && options.interpolate !== false) {\r\n      entry = this._interpolate(entry, options);\r\n    }\r\n\r\n    return entry;\r\n  }\r\n\r\n  localizeIntern = (object, options) => {\r\n    if (!isDate(object)) {\r\n      throw new Error('invalid argument: object must be a date');\r\n    }\r\n\r\n    options = extend(true, {}, options);\r\n\r\n    const locale  = options.locale  || this._registry.locale;\r\n    const scope   = options.scope   || translationScope;\r\n    const type    = options.type    || 'datetime';\r\n    let format  = options.format  || 'default';\r\n\r\n    options = { locale, scope, interpolate: false };\r\n    format  = this.translateIntern(['formats', type, format], extend(true, {}, options));\r\n\r\n    return strftime(object, format, this.translateIntern('names', options));\r\n  }\r\n\r\n  _pluralize = (locale, entry, count) => {\r\n    if (typeof entry !== 'object' || entry === null || typeof count !== 'number') {\r\n      return entry;\r\n    }\r\n\r\n    const pluralizeFunc = this.translateIntern('pluralize', { locale, scope: translationScope });\r\n\r\n    if (Object.prototype.toString.call(pluralizeFunc) !== '[object Function]') {\r\n      return pluralizeFunc;\r\n    }\r\n\r\n    return pluralizeFunc(entry, count);\r\n  }\r\n\r\n  withLocaleIntern = (locale, callback, context) => {\r\n    const previous = this._registry.locale;\r\n    this._registry.locale = locale;\r\n    const result = callback.call(context);\r\n    this._registry.locale = previous;\r\n    return result;\r\n  }\r\n\r\n  withScope = (scope, callback, context) => {\r\n    const previous = this._registry.scope;\r\n    this._registry.scope = scope;\r\n    const result = callback.call(context);\r\n    this._registry.scope = previous;\r\n    return result;\r\n  }\r\n\r\n  withSeparator = (separator, callback, context) => {\r\n    const previous = this.setSeparatorIntern(separator);\r\n    const result = callback.call(context);\r\n    this.setSeparatorIntern(previous);\r\n    return result;\r\n  }\r\n\r\n  _normalizeKeys = (locale, scope, key, separator) => {\r\n    let keys = [];\r\n\r\n    keys = keys.concat(this._normalizeKey(locale, separator));\r\n    keys = keys.concat(this._normalizeKey(scope, separator));\r\n    keys = keys.concat(this._normalizeKey(key, separator));\r\n\r\n    return keys;\r\n  }\r\n\r\n  _normalizeKey = (key, separator) => {\r\n    this._registry.normalizedKeys[separator] = this._registry.normalizedKeys[separator] || {};\r\n\r\n    this._registry.normalizedKeys[separator][key] = this._registry.normalizedKeys[separator][key] || ((key => {\r\n      if (isArray(key)) {\r\n        const normalizedKeyArray = key.map(k => this._normalizeKey(k, separator));\r\n\r\n        return [].concat(...normalizedKeyArray);\r\n      } else {\r\n        if (typeof key === 'undefined' || key === null) {\r\n          return [];\r\n        }\r\n\r\n        const keys = key.split(separator);\r\n\r\n        for (let i = keys.length - 1; i >= 0; i--) {\r\n          if (keys[i] === '') {\r\n            keys.splice(i, 1);\r\n\r\n            if (this._registry.keepTrailingDot === true && i == keys.length) {\r\n              keys[keys.length - 1] += `${separator}`;\r\n            }\r\n          }\r\n        }\r\n\r\n        return keys;\r\n      }\r\n    }))(key);\r\n\r\n    return this._registry.normalizedKeys[separator][key];\r\n  }\r\n\r\n  _interpolate = (entry, values) => (typeof entry !== 'string') ? entry : sprintf(entry, extend({}, this._registry.interpolations, values));\r\n\r\n  _resolve = (locale, scope, object, subject, options={}) => {\r\n    if (options.resolve === false) {\r\n      return subject;\r\n    }\r\n\r\n    let result;\r\n\r\n    if (isSymbol(subject)) {\r\n      result = this.translateIntern(subject, extend({}, options, { locale, scope }));\r\n    } else if (isFunction(subject)) {\r\n      let dateOrTime;\r\n\r\n      if (options.object) {\r\n        dateOrTime = options.object;\r\n        delete options.object;\r\n      } else {\r\n        dateOrTime = object;\r\n      }\r\n\r\n      result = this._resolve(locale, scope, object, subject(dateOrTime, options));\r\n    } else {\r\n      result = subject;\r\n    }\r\n\r\n    return /^missing translation:/.test(result) ? null : result;\r\n  }\r\n\r\n  _fallback = (locale, scope, object, subject, options) => {\r\n    options = except(options, 'fallback');\r\n\r\n    if (isArray(subject)) {\r\n      for (let i = 0, ii = subject.length; i < ii; i++) {\r\n        const result = this._resolve(locale, scope, object, subject[i], options);\r\n\r\n        if (result) {\r\n          return result;\r\n        }\r\n      }\r\n\r\n      return null;\r\n    } else {\r\n      return this._resolve(locale, scope, object, subject, options);\r\n    }\r\n  }\r\n}\r\n\r\nconst instance = new Counterpart();\r\n\r\nCounterpart.prototype.onLocaleChange =\r\nCounterpart.prototype.addLocaleChangeListener = callback => {\r\n                                                  events.EventEmitter.addListener('localechange', callback);\r\n                                                };\r\n\r\nCounterpart.prototype.offLocaleChange =\r\nCounterpart.prototype.removeLocaleChangeListener = callback => {\r\n                                                      events.EventEmitter.removeListener('localechange', callback);\r\n                                                    };\r\n\r\nCounterpart.prototype.onTranslationNotFound =\r\nCounterpart.prototype.addTranslationNotFoundListener = callback => {\r\n                                                          events.EventEmitter.addListener('translationnotfound', callback);\r\n                                                        };\r\n\r\nCounterpart.prototype.offTranslationNotFound =\r\nCounterpart.prototype.removeTranslationNotFoundListener = callback => {\r\n                                                            events.EventEmitter.removeListener('translationnotfound', callback);\r\n                                                          };\r\nconst registerTranslations = (locale, data) => instance.registerTranslationsIntern(locale, data);\r\nconst translate = (key, options) => instance.translateIntern(key, options);\r\nconst setLocale = value => instance.setLocaleIntern(value);\r\nconst setFallbackLocale  = value => instance.setFallbackLocaleIntern(value);\r\nconst setSeparator = value => instance.setSeparatorIntern(value);\r\nconst getLocale = () => instance.getLocaleIntern();\r\nconst withLocale = (locale, callback, context) => instance.withLocaleIntern(locale, callback, context);\r\nconst registerInterpolations = () => instance.registerInterpolationsIntern();\r\nconst setKeyTransformer = () => instance.setKeyTransformerIntern();\r\nconst localize = () => instance.localizeIntern();\r\n\r\nextend(translate, instance, {\r\n  Instance: Counterpart,\r\n  Translator: Counterpart\r\n});\r\n\r\nexport default translate\r\nconst counterpart = Counterpart;\r\nexport {counterpart, translate, registerTranslations, setLocale, setFallbackLocale, setSeparator, getLocale, withLocale, registerInterpolations, setKeyTransformer, localize}\r\n"]}